# ─── Supabase Production Environment ──────────────────────────────────────────
# Copy to .env.production and fill in values from your Supabase project

# ── Database Mode ─────────────────────────────────────────────────────────────
# Set to "supabase" to use Supabase; "local" uses local Postgres
DB_MODE=supabase

# ── Supabase connection strings ───────────────────────────────────────────────
# Find in: Supabase Dashboard → Project Settings → Database → Connection string
#
# Use the "Transaction" pooler URL for DATABASE_URL (port 6543, pgBouncer)
# Use the "Direct" connection URL for DIRECT_URL (port 5432, for migrations)
DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1"
DIRECT_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres"

# ── JWT ───────────────────────────────────────────────────────────────────────
# NEVER reuse dev secrets in production!
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_ACCESS_SECRET="REPLACE_WITH_64_BYTE_HEX_ACCESS_SECRET"
JWT_REFRESH_SECRET="REPLACE_WITH_64_BYTE_HEX_REFRESH_SECRET"
JWT_ACCESS_EXPIRES="15m"
JWT_REFRESH_EXPIRES="7d"

# ── App ───────────────────────────────────────────────────────────────────────
NEXT_PUBLIC_APP_URL="https://your-domain.com"
APP_URL="https://your-domain.com"
NODE_ENV="production"

# ── Kakao ─────────────────────────────────────────────────────────────────────
KAKAO_API_KEY="your_kakao_rest_api_key"
KAKAO_SENDER_KEY="your_kakao_sender_key"
KAKAO_TEMPLATE_CODE_INVITE="your_invite_template_code"
KAKAO_TEMPLATE_CODE_PAYMENT="your_payment_template_code"
KAKAO_TEMPLATE_CODE_WELCOME="your_welcome_template_code"

# ── Security ──────────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=10
LOGIN_LOCKOUT_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION_MS=900000

# ── Seed ──────────────────────────────────────────────────────────────────────
SEED_SUPER_ADMIN_EMAIL="super@yourdomain.com"
SEED_SUPER_ADMIN_PASSWORD="REPLACE_WITH_STRONG_PASSWORD"

# ─────────────────────────────────────────────────────────────────────────────
# Supabase setup instructions:
# 1. Create project at https://supabase.com/dashboard
# 2. In Project Settings → Database copy Transaction and Direct URLs above
# 3. Run migrations: DATABASE_URL=<direct-url> npx prisma migrate deploy
# 4. Run seed: npm run db:seed
# 5. In production deployment (Vercel/Docker), set DATABASE_URL to pooler URL
# ─────────────────────────────────────────────────────────────────────────────
